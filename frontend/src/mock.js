// Mock data for football players - FIFA card style
export const mockPlayers = [
  {
    id: 1,
    name: "Manan N. Shah",
    position: "DEF",
    points: 85,
  photo: "https://res.cloudinary.com/dmj5fnl6q/image/upload/v1756469855/Manan_1_mfhiue.png",
    skills: {
      pace: 78,
      shooting: 45,
      passing: 82,
      defending: 89,
      dribbling: 65,
      physical: 84
    },
    age: 33,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 2,
    name: "Nishant",
    position: "ATT",
    points: 88,
    photo: "https://res.cloudinary.com/dmj5fnl6q/image/upload/v1756474767/nishant_riv78f.jpg",
    skills: {
      pace: 91,
      shooting: 87,
      passing: 79,
      defending: 35,
      dribbling: 88,
      physical: 75
    },
    age: 33,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 3,
    name: "Ashish Sadhu",
    position: "MID",
    points: 86,
    photo: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&h=600&fit=crop&crop=face",
    skills: {
      pace: 82,
      shooting: 76,
      passing: 91,
      defending: 74,
      dribbling: 83,
      physical: 79
    },
    age: 33,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 4,
    name: "Shalin Shah",
    position: "DEF",
    points: 83,
    photo: "https://res.cloudinary.com/dmj5fnl6q/image/upload/v1756474767/shalin_z7zfra.jpg",
    skills: {
      pace: 75,
      shooting: 42,
      passing: 78,
      defending: 87,
      dribbling: 62,
      physical: 88
    },
    age: 29,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 5,
    name: "Gaurav",
    position: "ATT",
    points: 90,
    photo: "https://res.cloudinary.com/dmj5fnl6q/image/upload/v1756474766/gaurav_chqr0k.jpg",
    skills: {
      pace: 93,
      shooting: 89,
      passing: 81,
      defending: 28,
      dribbling: 92,
      physical: 72
    },
    age: 29,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 6,
    name: "Deep Patel",
    position: "MID",
    points: 84,
    photo: "https://res.cloudinary.com/dmj5fnl6q/image/upload/v1756474767/deep_myt0vw.jpg",
    skills: {
      pace: 79,
      shooting: 72,
      passing: 87,
      defending: 78,
      dribbling: 80,
      physical: 82
    },
    age: 33,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 7,
    name: "Punit",
    position: "DEF",
    points: 81,
    photo: "https://res.cloudinary.com/dmj5fnl6q/image/upload/v1756474767/punit_jxbzhn.jpg",
    skills: {
      pace: 73,
      shooting: 38,
      passing: 76,
      defending: 85,
      dribbling: 58,
      physical: 86
    },
    age: 30,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 8,
    name: "Ishan Gadhavi",
    position: "ATT",
    points: 87,
    photo: "https://images.unsplash.com/photo-1492562080023-ab3db95bfbce?w=400&h=600&fit=crop&crop=face",
    skills: {
      pace: 88,
      shooting: 85,
      passing: 77,
      defending: 32,
      dribbling: 89,
      physical: 74
    },
    age: 26,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 9,
    name: "Parth Patel",
    position: "MID",
    points: 82,
    photo: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&h=600&fit=crop&crop=face",
    skills: {
      pace: 77,
      shooting: 68,
      passing: 84,
      defending: 76,
      dribbling: 78,
      physical: 80
    },
    age: 28,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 10,
    name: "Pritesh",
    position: "DEF",
    points: 84,
    photo: "https://res.cloudinary.com/dmj5fnl6q/image/upload/v1756474767/pritesh_i0nvwc.jpg",
    skills: {
      pace: 76,
      shooting: 45,
      passing: 81,
      defending: 88,
      dribbling: 64,
      physical: 85
    },
    age: 27,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 11,
    name: "Harsh Patel",
    position: "ATT",
    points: 86,
    photo: "https://res.cloudinary.com/dmj5fnl6q/image/upload/v1756474766/harsh_qkzilk.jpg",
    skills: {
      pace: 89,
      shooting: 83,
      passing: 75,
      defending: 30,
      dribbling: 87,
      physical: 73
    },
    age: 34,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 12,
    name: "Harshul Shah",
    position: "MID",
    points: 85,
    photo: "https://res.cloudinary.com/dmj5fnl6q/image/upload/v1756474766/harshul_l1uyym.jpg",
    skills: {
      pace: 81,
      shooting: 74,
      passing: 89,
      defending: 77,
      dribbling: 82,
      physical: 81
    },
    age: 29,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 13,
    name: "Gireesh Bhai",
    position: "DEF",
    points: 80,
    photo: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&h=600&fit=crop&crop=face",
    skills: {
      pace: 72,
      shooting: 40,
      passing: 74,
      defending: 84,
      dribbling: 60,
      physical: 83
    },
    age: 44,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 14,
    name: "Sandeep Patel",
    position: "ATT",
    points: 89,
    photo: "https://res.cloudinary.com/dmj5fnl6q/image/upload/v1756474767/sandipbhai_teobkd.jpg",
    skills: {
      pace: 92,
      shooting: 88,
      passing: 80,
      defending: 29,
      dribbling: 91,
      physical: 76
    },
    age: 23,
    preferredFoot: "Left",
    nationality: "India"
  },
  {
    id: 15,
    name: "Nikhil",
    position: "MID",
    points: 87,
    photo: "https://res.cloudinary.com/dmj5fnl6q/image/upload/v1756474766/nikhil_yqec4f.jpg",
    skills: {
      pace: 83,
      shooting: 78,
      passing: 92,
      defending: 75,
      dribbling: 85,
      physical: 82
    },
    age: 26,
    preferredFoot: "Right",
    nationality: "Germany"
  },
  {
    id: 16,
    name: "Shaji Bhai",
    position: "DEF",
    points: 82,
    photo: "https://images.unsplash.com/photo-1552058544-f2b08422138a?w=400&h=600&fit=crop&crop=face",
    skills: {
      pace: 74,
      shooting: 43,
      passing: 79,
      defending: 86,
      dribbling: 63,
      physical: 84
    },
    age: 28,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 17,
    name: "Prithvi",
    position: "ATT",
    points: 87,
    photo: "https://images.unsplash.com/photo-1492562080023-ab3db95bfbce?w=400&h=600&fit=crop&crop=face",
    skills: {
      pace: 88,
      shooting: 85,
      passing: 77,
      defending: 32,
      dribbling: 89,
      physical: 74
    },
    age: 26,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 18,
    name: "Jaynil",
    position: "ATT",
    points: 87,
    photo: "https://images.unsplash.com/photo-1492562080023-ab3db95bfbce?w=400&h=600&fit=crop&crop=face",
    skills: {
      pace: 88,
      shooting: 85,
      passing: 77,
      defending: 32,
      dribbling: 89,
      physical: 74
    },
    age: 26,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 19,
    name: "Shibu Chacha",
    position: "ATT",
    points: 87,
    photo: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&h=600&fit=crop&crop=face",
    skills: {
      pace: 88,
      shooting: 85,
      passing: 77,
      defending: 32,
      dribbling: 89,
      physical: 74
    },
    age: 26,
    preferredFoot: "Right",
    nationality: "India"
  },
  {
    id: 20,
    name: "Vatsal Nareda",
    position: "ATT",
    points: 87,
    photo: "https://res.cloudinary.com/dmj5fnl6q/image/upload/v1756502613/vatsal_ygpxku.jpg",
    skills: {
      pace: 88,
      shooting: 85,
      passing: 77,
      defending: 32,
      dribbling: 89,
      physical: 74
    },
    age: 26,
    preferredFoot: "Right",
    nationality: "India"
  }
];

// Team shuffle algorithm with position constraints
export const shuffleTeams = (players) => {
  if (players.length !== 16) {
    throw new Error("Exactly 16 players are required for team shuffle");
  }
  // Separate players by position
  const defenders = players.filter(p => p.position === 'DEF');
  const attackers = players.filter(p => p.position === 'ATT');
  const midfielders = players.filter(p => p.position === 'MID');

  if (defenders.length < 4) throw new Error("At least 4 defenders are required");
  if (attackers.length < 4) throw new Error("At least 4 attackers are required");
  if (midfielders.length < 2) throw new Error("At least 2 midfielders are required");

  // Shuffle each position array
  shuffleArray(defenders);
  shuffleArray(attackers);
  shuffleArray(midfielders);

  // Assign mandatory positions to teams
  const team1 = [
    defenders[0], defenders[1],
    attackers[0], attackers[1],
    midfielders[0]
  ];
  const team2 = [
    defenders[2], defenders[3],
    attackers[2], attackers[3],
    midfielders[1]
  ];

  // Collect remaining players
  const remaining = [
    ...defenders.slice(4),
    ...attackers.slice(4),
    ...midfielders.slice(2)
  ];
  shuffleArray(remaining);

  // Balance teams by total points using remaining players
  let team1Points = team1.reduce((sum, p) => sum + p.points, 0);
  let team2Points = team2.reduce((sum, p) => sum + p.points, 0);

  for (const player of remaining) {
    if (team1.length < 8) {
      if (team1Points <= team2Points) {
        team1.push(player);
        team1Points += player.points;
      } else {
        team2.push(player);
        team2Points += player.points;
      }
    } else {
      team2.push(player);
      team2Points += player.points;
    }
  }

  return {
    team1: {
      players: team1,
      totalPoints: team1Points,
      formation: getFormation(team1)
    },
    team2: {
      players: team2,
      totalPoints: team2Points,
      formation: getFormation(team2)
    }
  };
};

function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

const getFormation = (team) => {
  const def = team.filter(p => p.position === 'DEF').length;
  const mid = team.filter(p => p.position === 'MID').length;
  const att = team.filter(p => p.position === 'ATT').length;
  return `${def}-${mid}-${att}`;
};